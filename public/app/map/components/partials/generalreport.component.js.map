{"version":3,"sources":["../../src/app/map/components/partials/generalreport.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;gBAsBI,gCAAoB,eAAgC,EAAU,MAAqB;oBAA/D,oBAAe,GAAf,eAAe,CAAiB;oBAAU,WAAM,GAAN,MAAM,CAAe;oBALzE,qBAAgB,GAAG,IAAI,mBAAY,EAAE,CAAC;oBAM5C,yCAAyC;gBAC7C,CAAC;gBAAA,CAAC;gBACF,yCAAQ,GAAR;oBACI,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;oBACnC,YAAY;oBACZ,IAAI,CAAC,gBAAgB,GAAG,IAAI,IAAI,EAAE,CAAC;oBACnC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAClC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBACpC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBAEpC,IAAI,CAAC,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC;oBACjC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;oBACjC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;oBACnC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;oBACnC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,CAAC,CAAC;wBAC9B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC7C,CAAC;gBACL,CAAC;gBACD,iDAAgB,GAAhB,UAAiB,MAAM;oBACnB,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;gBACjC,CAAC;gBACD,6CAAY,GAAZ,UAAa,MAAM;oBACf,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,CAAC,CAAC;wBAC9B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC7C,CAAC;oBACD,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;oBAClE,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;oBAC9D,IAAI,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC;oBAE5C,IAAI,GAAG,GAAG,mCAAmC,GAAG,SAAS,GAAG,WAAW,GAAG,OAAO,GAAG,YAAY,GAAG,QAAQ,CAAC;oBAC5G,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;oBACxB,qCAAqC;oBACrC,yBAAyB;oBACzB,kCAAkC;oBAClC,WAAW;oBACX,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC;gBAC/B,CAAC;gBA3CQ;oBAAR,YAAK,EAAE;;0EAAyB;gBACvB;oBAAT,aAAM,EAAE;;gFAAuC;gBAFvC,sBAAsB;oBALlC,gBAAS,CAAC;wBACP,QAAQ,EAAE,gBAAgB;wBAC1B,WAAW,EAAE,4DAA4D;qBAC5E,CAAC;qDASuC,iCAAe,EAAkB,sBAAa;mBAP1E,sBAAsB,CA6ClC;gBAAD,6BAAC;aA7CD,AA6CC;;QAAA,CAAC","file":"generalreport.component.js","sourcesContent":["/**\r\n * Created by hiepl on 4/15/2018.\r\n */\r\nimport {Component, Input, OnInit, Output, EventEmitter} from '@angular/core';\r\nimport { MyMarker } from '../../models/marker';\r\nimport $ from 'jquery';\r\nimport {TrackingService} from \"../../../services/TrackingService\";\r\nimport {HelperService} from \"../../../services/Helper\";\r\nimport { NguiDatetimePickerModule } from '@ngui/datetime-picker';\r\n\r\n@Component({\r\n    selector: 'general-report',\r\n    templateUrl: './app/map/components/partials/generalreport.component.html',\r\n})\r\n\r\nexport class GeneralReportComponent implements OnInit {\r\n    @Input() listDevice : MyMarker[];\r\n    @Output() onSelectedDevice = new EventEmitter();\r\n    selectedDevice : MyMarker;\r\n    date_from_report : Date;\r\n    date_to_report: Date;\r\n    download_url: string;\r\n    constructor(private trackingService: TrackingService, private helper: HelperService) {\r\n        //this.options = new DatePickerOptions();\r\n    };\r\n    ngOnInit() {\r\n        console.log(\"General report init\");\r\n        //for report\r\n        this.date_from_report = new Date();\r\n        this.date_from_report.setHours(0);\r\n        this.date_from_report.setMinutes(0);\r\n        this.date_from_report.setSeconds(0);\r\n\r\n        this.date_to_report = new Date();\r\n        this.date_to_report.setHours(23);\r\n        this.date_to_report.setMinutes(59);\r\n        this.date_to_report.setSeconds(59);\r\n        if (this.selectedDevice == null) {\r\n            this.selectedDevice = this.listDevice[0];\r\n        }\r\n    }\r\n    onDeviceSelected($event) {\r\n        this.selectedDevice = $event;\r\n    }\r\n    onViewReport($event) {\r\n        if (this.selectedDevice == null) {\r\n            this.selectedDevice = this.listDevice[0];\r\n        }\r\n        let startDate = this.helper.formatDateTime(this.date_from_report);\r\n        let endDate = this.helper.formatDateTime(this.date_to_report);\r\n        let deviceId = this.selectedDevice.deviceId;\r\n\r\n        let url = '/report/general-report?startDate=' + startDate + \"&endDate=\" + endDate + \"&deviceId=\" + deviceId;\r\n        this.download_url = url;\r\n        // $('#aDownload').attr('href', url);\r\n        // setTimeout(function(){\r\n        //     $('#aDownload')[0].click();\r\n        // }, 200);\r\n        window.location.href = url;\r\n    }\r\n}"],"sourceRoot":"/src"}