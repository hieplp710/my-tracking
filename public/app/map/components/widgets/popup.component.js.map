{"version":3,"sources":["../../src/app/map/components/widgets/popup.component.ts"],"names":[],"mappings":"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","file":"popup.component.js","sourcesContent":["/**\r\n * Created by hiepl on 7/5/2017.\r\n */\r\n\r\nimport {Component, ElementRef, OnInit, ViewChild, AfterViewInit} from '@angular/core';\r\nimport {CookieService} from 'angular2-cookie/core';\r\n\r\nimport $ from 'jquery';\r\n\r\n\r\n@Component({\r\n    selector: 'popup',\r\n    templateUrl: './app/map/components/widgets/popup.component.html'\r\n})\r\n\r\n\r\nexport class PopupComponent implements OnInit, AfterViewInit {\r\n    @ViewChild('popupbody') private popupContent: ElementRef;\r\n    title: string;\r\n    isShow: boolean = false;\r\n    error? : any = null;\r\n    dataPopup: any;\r\n    constructor(private _cookieService:CookieService) {\r\n        //this.options = new DatePickerOptions();\r\n        this.title = 'Popup';\r\n    };\r\n    ngOnInit() {};\r\n    ngAfterViewInit() {};\r\n    contentBuilder(data: any) {\r\n        if (data) {\r\n            //build data for popup\r\n            if (data.title) {\r\n                this.title = data.title;\r\n            }\r\n            //this.popupBody.nativeElement.innerHTML = '<h1>bla bla bla</h1>';\r\n            if (data.devices) {\r\n                this.dataPopup = data.devices;\r\n            }\r\n        }\r\n    };\r\n    togglePopup(isHide?: boolean) {\r\n        let isHidden = isHide ? isHide : false;\r\n        this.isShow = !isHidden;\r\n        let username = $.trim($('#app-navbar-collapse a.dropdown-toggle').text());\r\n        console.log(this._cookieService.get(username), 'this._cookieService.get(username)');\r\n        if (this.isShow && this.popupContent !== undefined && this._cookieService.get(username) === undefined) {\r\n            var dom = '';\r\n            for (var i = 0; i < this.dataPopup.length; i++) {\r\n                var marker = this.dataPopup[i];\r\n                dom += '<li class=\"warning-text\">Thiết bị ' + marker.deviceNumber + ' sẽ hết hạn vào ngày ' + marker.expiredDate + '</li>';\r\n            }\r\n            this.popupContent.nativeElement.innerHTML = '<ul>' + dom + '</ul>';\r\n            this._cookieService.put(username, 'shown');\r\n        }\r\n    }\r\n    onToggleModal() {\r\n        let overlay = $('<div class=\"overlay open\"></div>');\r\n        if (this.isShow) {\r\n            $('body').append(overlay);\r\n        } else {\r\n            $('div.overlay').remove();\r\n        }\r\n    };\r\n    onClick($event) {\r\n        this.isShow = false;\r\n        this.onToggleModal();\r\n    };\r\n}\r\n"],"sourceRoot":"/src"}